From c57bea96b73eee1c6d5e288f0f57efbf5238e49a Mon Sep 17 00:00:00 2001
From: Sebastian Pipping <sebastian@pipping.org>
Date: Tue, 1 Mar 2022 23:04:52 +0100
Subject: [PATCH] lib|doc: Add a note on namespace URI validation

---
 expat/doc/reference.html | 8 ++++++++
 expat/lib/expat.h        | 6 ++++++
 2 files changed, 14 insertions(+)

Index: expat-2.2.9/expat/doc/reference.html
===================================================================
--- expat-2.2.9.orig/expat/doc/reference.html
+++ expat-2.2.9/expat/doc/reference.html
@@ -936,6 +936,14 @@ the local part will be concatenated with
 to support RDF processors. It is a programming error to use the null separator
 with <a href= "#XML_SetReturnNSTriplet">namespace triplets</a>.</div>
 
+<p><strong>Note:</strong>
+Expat does not validate namespace URIs (beyond encoding)
+against RFC 3986 today (and is not required to do so with regard to
+the XML 1.0 namespaces specification) but it may start doing that
+in future releases.  Before that, an application using Expat must
+be ready to receive namespace URIs containing non-URI characters.
+</p>
+
 <pre class="fcndec" id="XML_ParserCreate_MM">
 XML_Parser XMLCALL
 XML_ParserCreate_MM(const XML_Char *encoding,
Index: expat-2.2.9/expat/lib/expat.h
===================================================================
--- expat-2.2.9.orig/expat/lib/expat.h
+++ expat-2.2.9/expat/lib/expat.h
@@ -226,6 +226,12 @@ XML_ParserCreate(const XML_Char *encodin
    and the local part will be concatenated without any separator.
    It is a programming error to use the separator '\0' with namespace
    triplets (see XML_SetReturnNSTriplet).
+
+   Note that Expat does not validate namespace URIs (beyond encoding)
+   against RFC 3986 today (and is not required to do so with regard to
+   the XML 1.0 namespaces specification) but it may start doing that
+   in future releases.  Before that, an application using Expat must
+   be ready to receive namespace URIs containing non-URI characters.
 */
 XMLPARSEAPI(XML_Parser)
 XML_ParserCreateNS(const XML_Char *encoding, XML_Char namespaceSeparator);
